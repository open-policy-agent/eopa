# baseline: PE analysis runs and succeeds
exec eopa test filters.rego
! stderr .
cmp stdout exp/stdout

# empty query in PE result
exec eopa test empty/filters.rego
! stderr .
cmp stdout exp/stdout

-- filters.rego --
package filters

# METADATA
# custom:
#   unknowns:
#     - input.fruits

include if input.fruits.color == input.favorite

test_yellow_fruit if {
	include with input.fruits.color as "yellow"
		with input.favorite as "yellow"
}
-- empty/filters.rego --
package filters

# METADATA
# custom:
#   unknowns:
#     - input.fruits

include if input.favorite # produces an empty query

test_yellow_fruit if {
	include with input.fruits.color as "yellow"
		with input.favorite as "yellow"
}
-- exp/stdout --
PASS: 1/1
